<!--Custom Map Objects: Sizeable Icon on Status Transparent Background Redirect-->
<style>
	body {font-family: Arial, Helvetica, sans-serif;}
	
	/* The Modal (background) */
	.modal {
		display: none; /* Hidden by default */
		position: fixed; /* Stay in place */
		z-index: 1; /* Sit on top */
		padding-top: 100px; /* Location of the box */
		left: 0;
		top: 0;
		width: 100%; /* Full width */
		height: 100%; /* Full height */
		overflow: auto; /* Enable scroll if needed */
		background-color: rgb(0,0,0); /* Fallback color */
		background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
	}
	
	/* Modal Content */
	.modal-content {
		background-color: #fefefe;
		margin: auto;
		padding: 20px;
		border: 1px solid #888;
		width: 80%;
	}
	
	/* The Close Button */
	.close {
		color: #aaaaaa;
		float: right;
		font-size: 28px;
		font-weight: bold;
	}
	
	.close:hover,
	.close:focus {
		color: #000;
		text-decoration: none;
		cursor: pointer;
	}
	</style>

<div  class="map_object map_icon2 map_icon_large <#sensor type="colorclassofstate" prefix="map_iconcolor_" id="<@objectid>">"  id="<@itemid>" objectid="<@objectid>" subid="<@subid>" style="<#mapobject type="coordinates" subid="<@subid>" mode="<@editmode>">">
  <#mapobject type="objectgrip" mode="<@editmode>">
  <#mapobject type="htmlbefore" subid="<@subid>">
  <#objectproperty type="nodename" id="<@objectid>" var="nodename">
  <#objectstatus name="lastvalue" id="<@objectid>" var="lastvalue">
  <#objectstatus name="message" show="textraw" id="<@objectid>" var="message">
	<#mapobject type="htmlafter" subid="<@subid>">
	







  
	<script src="https://unpkg.com/axios@0.18.0/dist/axios.min.js"></script>
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.0.0/jquery.min.js"></script> -->
	<script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>


<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.js"></script> -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jquery-modal/0.9.1/jquery.modal.min.css" />
	
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
	 
	 
  <script>
    
  var 
	status ="<#objectstatus name="status"  id="<@objectid>">";

	
	if(status.includes("Down"))
		{
			document.getElementById("<@itemid>").style.opacity="0.6";
		}
	else
		{
			document.getElementById("<@itemid>").style.opacity="0.0";
		}
		
	function openpage() 
		{
			//alert("<@itemid>");
	
			//--SW - General Network MAP--//
	
		
			//--SW - General Network MAP--//
	


			if ("<@itemid>" == "mapelement_15349_7") showData("Info_Sima_F01-01",42);	

		}
		
		function showData(switchName,switchPort)
		{

			// https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_modal
			
			axios({url: 'http://172.16.17.191:5000/api/netNodes/prtg', method: 'post', data:{ switchName, switchPort }})
			.then(	result=>{
									console.log(result.data)
									var content="شماره نود: "+result.data.patchPanelPort+"</br>"
									// var modal = document.getElementById('myModal');
									//fill modal
									$("mapelement_14725_298").append(`
								
									<div id="id01" class="w3-modal">
    <div class="w3-modal-content">
      <div class="w3-container">
        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>
        <p>Some text. Some text. Some text.</p>
        <p>Some text. Some text. Some text.</p>
      </div>
    </div>
  </div>`)
											$("myModal").modal();
									// $("modalContent").append(content)

									// alert(JSON.stringify(result.data));
			}).catch( err=>{alert(err);})
		}




		///////////////////////////////////////



		function createModal(options) {
	 console.log("options: ",options)
  const overlayEl = document.createElement('div');
  overlayEl.className = 'overlay';

  const modalEl = document.createElement('div');
  modalEl.className = 'modal';

  modalEl.setAttribute("resizable", true);

  const modalHeaderEl = document.createElement('div');
  modalHeaderEl.className = 'modal-header';
  modalEl.appendChild(modalHeaderEl);

  if (options.title) {
    const titleEl = document.createElement('h3');
    titleEl.textContent = options.title;
    modalHeaderEl.appendChild(titleEl);
  }

  const closeMethod = () => {
    overlayEl.parentNode.removeChild(overlayEl);
  };

  const closeEl = document.createElement('button');
  closeEl.className = 'close-icon';
  closeEl.ariaLabel = 'Close';
  closeEl.addEventListener('click', closeMethod);
  modalHeaderEl.appendChild(closeEl);

  const modalBodyEl = document.createElement('div');
  modalBodyEl.className = 'modal-body';
  modalEl.appendChild(modalBodyEl);
  if (options.bodyCallback) {
    options.bodyCallback(modalBodyEl, closeMethod);
  }

  overlayEl.appendChild(modalEl);

  return overlayEl;
}




	function showData(switchName,switchPort)
		{

			// https://www.w3schools.com/howto/tryit.asp?filename=tryhow_css_modal
			
			axios({url: 'http://172.16.17.191:5000/api/netNodes/prtg', method: 'post', data:{ switchName, switchPort }})
			.then(	result=>{
			var node = document.createElement("myModal");
									console.log(result.data)
									var content="شماره نود: "+result.data.patchPanelPort+"</br>"
									// var modal = document.getElementById('myModal');
									//fill modal
									
									
									<div id="id01" class="w3-modal">
    <div class="w3-modal-content">
      <div class="w3-container">
        <span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>
        <p>Some text. Some text. Some text.</p>
        <p>Some text. Some text. Some text.</p>
      </div>
    </div>
  </div>
  
  
		/*							const modalEl = createModal({
    title: 'Container Preferences',
    bodyCallback: (bodyEl, close) => {
      const doneEl = document.createElement('button');
      doneEl.addEventListener('click',  () => {
        // TODO
        close();
      });
      doneEl.textContent = 'Done';
      bodyEl.appendChild(doneEl);
    }
  });
  document.body.appendChild(modalEl);*/
  
										
							
			}).catch( err=>{alert(err);})
		}




		/////////////////////////////////////////////

  var element = document.getElementById("<@itemid>");
  element.addEventListener("click", openpage, false);
  document.getElementById("<@itemid>").style.cursor = "pointer";	
  
  </script>
</div>


 
 